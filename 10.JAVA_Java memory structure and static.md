# 자바 메모리 구조와 static

## 1. 자바 메모리 구조

자바의 메모리 구조는 크게 다음과 같이 나뉜다:

<img width="989" height="339" alt="image" src="https://github.com/user-attachments/assets/f410cbaf-14f6-4ec3-a42a-f69082da25ff" />

- **메서드 영역(Method Area)**: 클래스 정보, static 변수, 런타임 상수 풀 등을 저장. 프로그램 전체에서 공유됨.
- **스택 영역(Stack Area)**: 메서드 호출 시마다 스택 프레임이 생성되어 지역 변수, 매개변수 등을 저장.
- **힙 영역(Heap Area)**: new로 생성된 객체와 배열이 저장. GC의 대상이 됨.
  
<img width="946" height="325" alt="image" src="https://github.com/user-attachments/assets/7e9ae72a-1dd3-47a5-93a9-7bdbba30adae" />


### 스택 프레임의 동작

메서드를 호출하면 스택에 프레임이 쌓이고, 종료 시 제거됨. 지역 변수도 함께 제거됨.

## 2. 스택과 큐 자료구조

- **스택 (Stack)**: LIFO (Last In First Out) 구조. 메서드 호출과 적합.
<img width="566" height="325" alt="image" src="https://github.com/user-attachments/assets/a4389524-7cc4-421c-b495-79733d738de1" />
<img width="980" height="415" alt="image" src="https://github.com/user-attachments/assets/7a5f859f-ea16-4e95-afe0-38685fd4dd4c" />
<img width="980" height="388" alt="image" src="https://github.com/user-attachments/assets/6c799372-68fa-4c90-984a-6c8eb0fa18f2" />


- **큐 (Queue)**: FIFO (First In First Out) 구조. 선입선출.
<img width="577" height="524" alt="image" src="https://github.com/user-attachments/assets/0d340171-380a-4d4c-a893-571462ff9db5" />


## 3. 스택과 힙 영역의 연동

```java
Data data1 = new Data(10); // 힙에 객체 생성, 스택에는 참조값 저장
```

GC는 참조되지 않는 객체를 메모리에서 제거함.

## 4. static 변수

### 인스턴스 변수와 static 변수의 차이

- **인스턴스 변수**: 각 객체마다 존재. 힙에 저장됨.
- **static 변수**: 클래스당 하나 존재. 메서드 영역에 저장됨. 프로그램 종료 시까지 유지됨.

### 예시

```java
public class Data3 {
    public String name;
    public static int count; // static 변수
}
```

### 접근 방법

- 권장: `Data3.count`
- 비추천: `data3.count`

## 5. static 메서드

### 특징

- 객체 생성 없이 클래스명으로 직접 호출 가능
- 인스턴스 변수/메서드 접근 불가

```java
public static void staticCall() {
    staticMethod(); // OK
    // instanceMethod(); // 오류
}
```

## 6. static import

정적 메서드를 반복 사용할 경우, 클래스명을 생략 가능:

```java
import static some.ClassName.*;
```

## 7. main() 메서드는 static

`main()`은 정적 메서드이기 때문에 객체 생성 없이 실행 가능하며, 내부에서 호출하는 메서드도 정적이어야 함.

## 8. 연습 문제

### 문제 1: Car 클래스에서 생성된 차량 수 세기

```java
public class Car {
    private static int totalCars;
    private String name;

    public Car(String name) {
        this.name = name;
        totalCars++;
    }

    public static void showTotalCars() {
        System.out.println("구매한 차량 수: " + totalCars);
    }
}
```

### 문제 2: 수학 유틸리티 클래스

```java
public class MathArrayUtils {
    private MathArrayUtils() {} // 생성자 막기

    public static int sum(int[] values) { ... }
    public static double average(int[] values) { ... }
    public static int min(int[] values) { ... }
    public static int max(int[] values) { ... }
}
```
